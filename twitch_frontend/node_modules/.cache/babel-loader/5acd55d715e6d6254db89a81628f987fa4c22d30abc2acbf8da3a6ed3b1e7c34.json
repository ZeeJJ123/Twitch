{"ast":null,"code":"import _slicedToArray from\"/Users/zhehuang/twitchfe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Layout,message,Menu}from\"antd\";import{LikeOutlined,FireOutlined}from\"@ant-design/icons\";import{logout,getFavoriteItem,getTopGames,searchGameById,getRecommendations}from\"./utils\";import PageHeader from\"./components/PageHeader\";import CustomSearch from\"./components/CustomSearch\";import Home from\"./components/Home\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=Layout.Header,Content=Layout.Content,Sider=Layout.Sider;function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),favoriteItems=_useState4[0],setFavoriteItems=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),topGames=_useState6[0],setTopGames=_useState6[1];var _useState7=useState({videos:[],streams:[],clips:[]}),_useState8=_slicedToArray(_useState7,2),resources=_useState8[0],setResources=_useState8[1];useEffect(function(){getTopGames().then(function(data){setTopGames(data);}).catch(function(err){message.error(err.message);});},[]);var signinOnSuccess=function signinOnSuccess(){setLoggedIn(true);getFavoriteItem().then(function(data){setFavoriteItems(data);});};var signoutOnClick=function signoutOnClick(){logout().then(function(){setLoggedIn(false);message.success(\"Successfully Signed out\");}).catch(function(err){message.error(err.message);});};var customSearchOnSuccess=function customSearchOnSuccess(data){setResources(data);};var onGameSelect=function onGameSelect(_ref){var key=_ref.key;if(key===\"recommendation\"){getRecommendations().then(function(data){setResources(data);});return;}searchGameById(key).then(function(data){setResources(data);});};var favoriteOnChange=function favoriteOnChange(){getFavoriteItem().then(function(data){setFavoriteItems(data);}).catch(function(err){message.error(err.message);});};var mapTopGamesToProps=function mapTopGamesToProps(topGames){return[{label:\"Recommend for you!\",key:\"recommendation\",icon:/*#__PURE__*/_jsx(LikeOutlined,{})},{label:\"Popular Games\",key:\"popular_games\",icon:/*#__PURE__*/_jsx(FireOutlined,{}),children:topGames.map(function(game){return{label:game.name,key:game.id,icon:/*#__PURE__*/_jsx(\"img\",{alt:\"placeholder\",src:game.box_art_url.replace(\"{height}\",\"40\").replace(\"{width}\",\"40\"),style:{borderRadius:\"50%\",marginRight:\"20px\"}})};})}];};return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsx(PageHeader,{loggedIn:loggedIn,signoutOnClick:signoutOnClick,signinOnSuccess:signinOnSuccess,favoriteItems:favoriteItems})}),/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(Sider,{width:300,className:\"site-layout-background\",children:[/*#__PURE__*/_jsx(CustomSearch,{onSuccess:customSearchOnSuccess}),/*#__PURE__*/_jsx(Menu,{mode:\"inline\",onSelect:onGameSelect,style:{marginTop:\"10px\"},items:mapTopGamesToProps(topGames)})]}),/*#__PURE__*/_jsx(Layout,{style:{padding:\"24px\"},children:/*#__PURE__*/_jsx(Content,{className:\"site-layout-background\",style:{padding:24,margin:0,height:800,overflow:\"auto\"},children:/*#__PURE__*/_jsx(Home,{resources:resources,loggedIn:loggedIn,favoriteOnChange:favoriteOnChange,favoriteItems:favoriteItems})})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Layout","message","Menu","LikeOutlined","FireOutlined","logout","getFavoriteItem","getTopGames","searchGameById","getRecommendations","PageHeader","CustomSearch","Home","jsx","_jsx","jsxs","_jsxs","Header","Content","Sider","App","_useState","_useState2","_slicedToArray","loggedIn","setLoggedIn","_useState3","_useState4","favoriteItems","setFavoriteItems","_useState5","_useState6","topGames","setTopGames","_useState7","videos","streams","clips","_useState8","resources","setResources","then","data","catch","err","error","signinOnSuccess","signoutOnClick","success","customSearchOnSuccess","onGameSelect","_ref","key","favoriteOnChange","mapTopGamesToProps","label","icon","children","map","game","name","id","alt","src","box_art_url","replace","style","borderRadius","marginRight","width","className","onSuccess","mode","onSelect","marginTop","items","padding","margin","height","overflow"],"sources":["/Users/zhehuang/twitchfe/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Layout, message, Menu } from \"antd\";\nimport { LikeOutlined, FireOutlined } from \"@ant-design/icons\";\nimport {\n  logout,\n  getFavoriteItem,\n  getTopGames,\n  searchGameById,\n  getRecommendations,\n} from \"./utils\";\nimport PageHeader from \"./components/PageHeader\";\nimport CustomSearch from \"./components/CustomSearch\";\nimport Home from \"./components/Home\";\n\nconst { Header, Content, Sider } = Layout;\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [favoriteItems, setFavoriteItems] = useState([]);\n  const [topGames, setTopGames] = useState([]);\n  const [resources, setResources] = useState({\n    videos: [],\n    streams: [],\n    clips: [],\n  });\n\n  useEffect(() => {\n    getTopGames()\n      .then((data) => {\n        setTopGames(data);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      });\n  }, []);\n\n  const signinOnSuccess = () => {\n    setLoggedIn(true);\n    getFavoriteItem().then((data) => {\n      setFavoriteItems(data);\n    });\n  };\n\n  const signoutOnClick = () => {\n    logout()\n      .then(() => {\n        setLoggedIn(false);\n        message.success(\"Successfully Signed out\");\n      })\n      .catch((err) => {\n        message.error(err.message);\n      });\n  };\n\n  const customSearchOnSuccess = (data) => {\n    setResources(data);\n  };\n\n  const onGameSelect = ({ key }) => {\n    if (key === \"recommendation\") {\n      getRecommendations().then((data) => {\n        setResources(data);\n      });\n      return;\n    }\n\n    searchGameById(key).then((data) => {\n      setResources(data);\n    });\n  };\n\n  const favoriteOnChange = () => {\n    getFavoriteItem()\n      .then((data) => {\n        setFavoriteItems(data);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      });\n  };\n\n  const mapTopGamesToProps = (topGames) => [\n    {\n      label: \"Recommend for you!\",\n      key: \"recommendation\",\n      icon: <LikeOutlined />,\n    },\n    {\n      label: \"Popular Games\",\n      key: \"popular_games\",\n      icon: <FireOutlined />,\n      children: topGames.map((game) => ({\n        label: game.name,\n        key: game.id,\n        icon: (\n          <img\n            alt=\"placeholder\"\n            src={game.box_art_url\n              .replace(\"{height}\", \"40\")\n              .replace(\"{width}\", \"40\")}\n            style={{ borderRadius: \"50%\", marginRight: \"20px\" }}\n          />\n        ),\n      })),\n    },\n  ];\n\n  return (\n    <Layout>\n      <Header>\n        <PageHeader\n          loggedIn={loggedIn}\n          signoutOnClick={signoutOnClick}\n          signinOnSuccess={signinOnSuccess}\n          favoriteItems={favoriteItems}\n        />\n      </Header>\n      <Layout>\n        <Sider width={300} className=\"site-layout-background\">\n          <CustomSearch onSuccess={customSearchOnSuccess} />\n          <Menu\n            mode=\"inline\"\n            onSelect={onGameSelect}\n            style={{ marginTop: \"10px\" }}\n            items={mapTopGamesToProps(topGames)}\n          />\n        </Sider>\n        <Layout style={{ padding: \"24px\" }}>\n          <Content\n            className=\"site-layout-background\"\n            style={{\n              padding: 24,\n              margin: 0,\n              height: 800,\n              overflow: \"auto\",\n            }}\n          >\n            <Home\n              resources={resources}\n              loggedIn={loggedIn}\n              favoriteOnChange={favoriteOnChange}\n              favoriteItems={favoriteItems}\n            />\n          </Content>\n        </Layout>\n      </Layout>\n    </Layout>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}