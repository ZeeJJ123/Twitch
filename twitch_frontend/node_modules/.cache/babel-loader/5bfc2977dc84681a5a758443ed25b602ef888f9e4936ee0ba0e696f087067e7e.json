{"ast":null,"code":"import React from\"react\";import{Button,Card,List,Tabs,Tooltip,message}from\"antd\";import{StarOutlined,StarFilled}from\"@ant-design/icons\";import{addFavoriteItem,deleteFavoriteItem}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TabPane=Tabs.TabPane;var tabKeys={Streams:\"stream\",Videos:\"videos\",Clips:\"clips\"};var processUrl=function processUrl(url){return url.replace(\"%{height}\",\"252\").replace(\"%{width}\",\"480\").replace(\"{height}\",\"252\").replace(\"{width}\",\"480\");};var renderCardTitle=function renderCardTitle(item,loggedIn){var favs=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var favOnChange=arguments.length>3?arguments[3]:undefined;var title=\"\".concat(item.broadcaster_name,\" - \").concat(item.title);var isFav=favs.find(function(fav){return fav.twitch_id===item.twitch_id;});var favOnClick=function favOnClick(){if(isFav){deleteFavoriteItem(item).then(function(){favOnChange();}).catch(function(err){message.error(err.message);});return;}addFavoriteItem(item).then(function(){favOnChange();}).catch(function(err){message.error(err.message);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[loggedIn&&/*#__PURE__*/_jsx(Tooltip,{title:isFav?\"Remove from favorite list\":\"Add to favorite list\",children:/*#__PURE__*/_jsx(Button,{shape:\"circle\",icon:isFav?/*#__PURE__*/_jsx(StarFilled,{}):/*#__PURE__*/_jsx(StarOutlined,{}),onClick:favOnClick})}),/*#__PURE__*/_jsx(\"div\",{style:{overflow:\"hidden\",textOverflow:\"ellipsis\",width:450},children:/*#__PURE__*/_jsx(Tooltip,{title:title,children:/*#__PURE__*/_jsx(\"span\",{children:title})})})]});};var renderCardGrid=function renderCardGrid(data,loggedIn,favs,favOnChange){return/*#__PURE__*/_jsx(List,{grid:{xs:1,sm:2,md:4,lg:4,xl:6},dataSource:data,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{style:{marginRight:\"20px\"},children:/*#__PURE__*/_jsx(Card,{title:renderCardTitle(item,loggedIn,favs,favOnChange),children:/*#__PURE__*/_jsx(\"a\",{href:item.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{width:\"100%\",height:\"100%\"},children:/*#__PURE__*/_jsx(\"img\",{alt:\"Placeholder\",src:processUrl(item.thumbnail_url),style:{width:\"100%\",height:\"100%\"}})})})});}});};var Home=function Home(_ref){var resources=_ref.resources,loggedIn=_ref.loggedIn,favoriteItems=_ref.favoriteItems,favoriteOnChange=_ref.favoriteOnChange;var videos=resources.videos,streams=resources.streams,clips=resources.clips;var favVideos=favoriteItems.videos,favStreams=favoriteItems.streams,favClips=favoriteItems.clips;return/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:tabKeys.Streams,children:[/*#__PURE__*/_jsx(TabPane,{tab:\"Streams\",forceRender:true,children:renderCardGrid(streams,loggedIn,favStreams,favoriteOnChange)},tabKeys.Streams),/*#__PURE__*/_jsx(TabPane,{tab:\"Videos\",forceRender:true,children:renderCardGrid(videos,loggedIn,favVideos,favoriteOnChange)},tabKeys.Videos),/*#__PURE__*/_jsx(TabPane,{tab:\"Clips\",forceRender:true,children:renderCardGrid(clips,loggedIn,favClips,favoriteOnChange)},tabKeys.Clips)]});};export default Home;","map":{"version":3,"names":["React","Button","Card","List","Tabs","Tooltip","message","StarOutlined","StarFilled","addFavoriteItem","deleteFavoriteItem","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TabPane","tabKeys","Streams","Videos","Clips","processUrl","url","replace","renderCardTitle","item","loggedIn","favs","arguments","length","undefined","favOnChange","title","concat","broadcaster_name","isFav","find","fav","twitch_id","favOnClick","then","catch","err","error","children","shape","icon","onClick","style","overflow","textOverflow","width","renderCardGrid","data","grid","xs","sm","md","lg","xl","dataSource","renderItem","Item","marginRight","href","target","rel","height","alt","src","thumbnail_url","Home","_ref","resources","favoriteItems","favoriteOnChange","videos","streams","clips","favVideos","favStreams","favClips","defaultActiveKey","tab","forceRender"],"sources":["/Users/zhehuang/twitchfe/src/components/Home.js"],"sourcesContent":["import React from \"react\";\nimport { Button, Card, List, Tabs, Tooltip, message } from \"antd\";\nimport { StarOutlined, StarFilled } from \"@ant-design/icons\";\nimport { addFavoriteItem, deleteFavoriteItem } from \"../utils\";\n\nconst { TabPane } = Tabs;\nconst tabKeys = {\n  Streams: \"stream\",\n  Videos: \"videos\",\n  Clips: \"clips\",\n};\n\nconst processUrl = (url) =>\n  url\n    .replace(\"%{height}\", \"252\")\n    .replace(\"%{width}\", \"480\")\n    .replace(\"{height}\", \"252\")\n    .replace(\"{width}\", \"480\");\n\nconst renderCardTitle = (item, loggedIn, favs = [], favOnChange) => {\n  const title = `${item.broadcaster_name} - ${item.title}`;\n\n  const isFav = favs.find((fav) => fav.twitch_id === item.twitch_id);\n\n  const favOnClick = () => {\n    if (isFav) {\n      deleteFavoriteItem(item)\n        .then(() => {\n          favOnChange();\n        })\n        .catch((err) => {\n          message.error(err.message);\n        });\n      return;\n    }\n\n    addFavoriteItem(item)\n      .then(() => {\n        favOnChange();\n      })\n      .catch((err) => {\n        message.error(err.message);\n      });\n  };\n\n  return (\n    <>\n      {loggedIn && (\n        <Tooltip\n          title={isFav ? \"Remove from favorite list\" : \"Add to favorite list\"}\n        >\n          <Button\n            shape=\"circle\"\n            icon={isFav ? <StarFilled /> : <StarOutlined />}\n            onClick={favOnClick}\n          />\n        </Tooltip>\n      )}\n      <div style={{ overflow: \"hidden\", textOverflow: \"ellipsis\", width: 450 }}>\n        <Tooltip title={title}>\n          <span>{title}</span>\n        </Tooltip>\n      </div>\n    </>\n  );\n};\n\nconst renderCardGrid = (data, loggedIn, favs, favOnChange) => {\n  return (\n    <List\n      grid={{\n        xs: 1,\n        sm: 2,\n        md: 4,\n        lg: 4,\n        xl: 6,\n      }}\n      dataSource={data}\n      renderItem={(item) => (\n        <List.Item style={{ marginRight: \"20px\" }}>\n          <Card title={renderCardTitle(item, loggedIn, favs, favOnChange)}>\n            <a\n              href={item.url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{ width: \"100%\", height: \"100%\" }}\n            >\n              <img\n                alt=\"Placeholder\"\n                src={processUrl(item.thumbnail_url)}\n                style={{ width: \"100%\", height: \"100%\" }}\n              />\n            </a>\n          </Card>\n        </List.Item>\n      )}\n    />\n  );\n};\n\nconst Home = ({ resources, loggedIn, favoriteItems, favoriteOnChange }) => {\n  const { videos, streams, clips } = resources;\n  const {\n    videos: favVideos,\n    streams: favStreams,\n    clips: favClips,\n  } = favoriteItems;\n\n  return (\n    <Tabs defaultActiveKey={tabKeys.Streams}>\n      <TabPane tab=\"Streams\" key={tabKeys.Streams} forceRender={true}>\n        {renderCardGrid(streams, loggedIn, favStreams, favoriteOnChange)}\n      </TabPane>\n      <TabPane tab=\"Videos\" key={tabKeys.Videos} forceRender={true}>\n        {renderCardGrid(videos, loggedIn, favVideos, favoriteOnChange)}\n      </TabPane>\n      <TabPane tab=\"Clips\" key={tabKeys.Clips} forceRender={true}>\n        {renderCardGrid(clips, loggedIn, favClips, favoriteOnChange)}\n      </TabPane>\n    </Tabs>\n  );\n};\n\nexport default Home;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAAEC,IAAI,CAAEC,OAAO,CAAEC,OAAO,KAAQ,MAAM,CACjE,OAASC,YAAY,CAAEC,UAAU,KAAQ,mBAAmB,CAC5D,OAASC,eAAe,CAAEC,kBAAkB,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/D,GAAQ,CAAAC,OAAO,CAAKb,IAAI,CAAhBa,OAAO,CACf,GAAM,CAAAC,OAAO,CAAG,CACdC,OAAO,CAAE,QAAQ,CACjBC,MAAM,CAAE,QAAQ,CAChBC,KAAK,CAAE,OACT,CAAC,CAED,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,GAAG,QACrB,CAAAA,GAAG,CACAC,OAAO,CAAC,WAAW,CAAE,KAAK,CAAC,CAC3BA,OAAO,CAAC,UAAU,CAAE,KAAK,CAAC,CAC1BA,OAAO,CAAC,UAAU,CAAE,KAAK,CAAC,CAC1BA,OAAO,CAAC,SAAS,CAAE,KAAK,CAAC,GAE9B,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,IAAI,CAAEC,QAAQ,CAA6B,IAA3B,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EAAE,IAAE,CAAAG,WAAW,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CAC7D,GAAM,CAAAE,KAAK,IAAAC,MAAA,CAAMR,IAAI,CAACS,gBAAgB,QAAAD,MAAA,CAAMR,IAAI,CAACO,KAAK,CAAE,CAExD,GAAM,CAAAG,KAAK,CAAGR,IAAI,CAACS,IAAI,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,CAACC,SAAS,GAAKb,IAAI,CAACa,SAAS,GAAC,CAElE,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB,GAAIJ,KAAK,CAAE,CACT1B,kBAAkB,CAACgB,IAAI,CAAC,CACrBe,IAAI,CAAC,UAAM,CACVT,WAAW,CAAC,CAAC,CACf,CAAC,CAAC,CACDU,KAAK,CAAC,SAACC,GAAG,CAAK,CACdrC,OAAO,CAACsC,KAAK,CAACD,GAAG,CAACrC,OAAO,CAAC,CAC5B,CAAC,CAAC,CACJ,OACF,CAEAG,eAAe,CAACiB,IAAI,CAAC,CAClBe,IAAI,CAAC,UAAM,CACVT,WAAW,CAAC,CAAC,CACf,CAAC,CAAC,CACDU,KAAK,CAAC,SAACC,GAAG,CAAK,CACdrC,OAAO,CAACsC,KAAK,CAACD,GAAG,CAACrC,OAAO,CAAC,CAC5B,CAAC,CAAC,CACN,CAAC,CAED,mBACEU,KAAA,CAAAF,SAAA,EAAA+B,QAAA,EACGlB,QAAQ,eACPf,IAAA,CAACP,OAAO,EACN4B,KAAK,CAAEG,KAAK,CAAG,2BAA2B,CAAG,sBAAuB,CAAAS,QAAA,cAEpEjC,IAAA,CAACX,MAAM,EACL6C,KAAK,CAAC,QAAQ,CACdC,IAAI,CAAEX,KAAK,cAAGxB,IAAA,CAACJ,UAAU,GAAE,CAAC,cAAGI,IAAA,CAACL,YAAY,GAAE,CAAE,CAChDyC,OAAO,CAAER,UAAW,CACrB,CAAC,CACK,CACV,cACD5B,IAAA,QAAKqC,KAAK,CAAE,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,YAAY,CAAE,UAAU,CAAEC,KAAK,CAAE,GAAI,CAAE,CAAAP,QAAA,cACvEjC,IAAA,CAACP,OAAO,EAAC4B,KAAK,CAAEA,KAAM,CAAAY,QAAA,cACpBjC,IAAA,SAAAiC,QAAA,CAAOZ,KAAK,CAAO,CAAC,CACb,CAAC,CACP,CAAC,EACN,CAAC,CAEP,CAAC,CAED,GAAM,CAAAoB,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,IAAI,CAAE3B,QAAQ,CAAEC,IAAI,CAAEI,WAAW,CAAK,CAC5D,mBACEpB,IAAA,CAACT,IAAI,EACHoD,IAAI,CAAE,CACJC,EAAE,CAAE,CAAC,CACLC,EAAE,CAAE,CAAC,CACLC,EAAE,CAAE,CAAC,CACLC,EAAE,CAAE,CAAC,CACLC,EAAE,CAAE,CACN,CAAE,CACFC,UAAU,CAAEP,IAAK,CACjBQ,UAAU,CAAE,SAAAA,WAACpC,IAAI,qBACfd,IAAA,CAACT,IAAI,CAAC4D,IAAI,EAACd,KAAK,CAAE,CAAEe,WAAW,CAAE,MAAO,CAAE,CAAAnB,QAAA,cACxCjC,IAAA,CAACV,IAAI,EAAC+B,KAAK,CAAER,eAAe,CAACC,IAAI,CAAEC,QAAQ,CAAEC,IAAI,CAAEI,WAAW,CAAE,CAAAa,QAAA,cAC9DjC,IAAA,MACEqD,IAAI,CAAEvC,IAAI,CAACH,GAAI,CACf2C,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBlB,KAAK,CAAE,CAAEG,KAAK,CAAE,MAAM,CAAEgB,MAAM,CAAE,MAAO,CAAE,CAAAvB,QAAA,cAEzCjC,IAAA,QACEyD,GAAG,CAAC,aAAa,CACjBC,GAAG,CAAEhD,UAAU,CAACI,IAAI,CAAC6C,aAAa,CAAE,CACpCtB,KAAK,CAAE,CAAEG,KAAK,CAAE,MAAM,CAAEgB,MAAM,CAAE,MAAO,CAAE,CAC1C,CAAC,CACD,CAAC,CACA,CAAC,CACE,CAAC,EACZ,CACH,CAAC,CAEN,CAAC,CAED,GAAM,CAAAI,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAAC,IAAA,CAAiE,IAA3D,CAAAC,SAAS,CAAAD,IAAA,CAATC,SAAS,CAAE/C,QAAQ,CAAA8C,IAAA,CAAR9C,QAAQ,CAAEgD,aAAa,CAAAF,IAAA,CAAbE,aAAa,CAAEC,gBAAgB,CAAAH,IAAA,CAAhBG,gBAAgB,CAClE,GAAQ,CAAAC,MAAM,CAAqBH,SAAS,CAApCG,MAAM,CAAEC,OAAO,CAAYJ,SAAS,CAA5BI,OAAO,CAAEC,KAAK,CAAKL,SAAS,CAAnBK,KAAK,CAC9B,GACU,CAAAC,SAAS,CAGfL,aAAa,CAHfE,MAAM,CACGI,UAAU,CAEjBN,aAAa,CAFfG,OAAO,CACAI,QAAQ,CACbP,aAAa,CADfI,KAAK,CAGP,mBACE/D,KAAA,CAACZ,IAAI,EAAC+E,gBAAgB,CAAEjE,OAAO,CAACC,OAAQ,CAAA0B,QAAA,eACtCjC,IAAA,CAACK,OAAO,EAACmE,GAAG,CAAC,SAAS,CAAuBC,WAAW,CAAE,IAAK,CAAAxC,QAAA,CAC5DQ,cAAc,CAACyB,OAAO,CAAEnD,QAAQ,CAAEsD,UAAU,CAAEL,gBAAgB,CAAC,EADtC1D,OAAO,CAACC,OAE3B,CAAC,cACVP,IAAA,CAACK,OAAO,EAACmE,GAAG,CAAC,QAAQ,CAAsBC,WAAW,CAAE,IAAK,CAAAxC,QAAA,CAC1DQ,cAAc,CAACwB,MAAM,CAAElD,QAAQ,CAAEqD,SAAS,CAAEJ,gBAAgB,CAAC,EADrC1D,OAAO,CAACE,MAE1B,CAAC,cACVR,IAAA,CAACK,OAAO,EAACmE,GAAG,CAAC,OAAO,CAAqBC,WAAW,CAAE,IAAK,CAAAxC,QAAA,CACxDQ,cAAc,CAAC0B,KAAK,CAAEpD,QAAQ,CAAEuD,QAAQ,CAAEN,gBAAgB,CAAC,EADpC1D,OAAO,CAACG,KAEzB,CAAC,EACN,CAAC,CAEX,CAAC,CAED,cAAe,CAAAmD,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}