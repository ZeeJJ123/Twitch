<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>
  </head>
  <body>
    <div id="root">
      <p>我是一只小小鸟</p>
    </div>
    <script type="text/babel">
      const Parent = () => {
        const [balance, setBalance] = React.useState(1000);
        const [showChild, setShowChild] = React.useState(false);

        React.useEffect(() => {
          console.log(
            "componentDidUpdate / componentDidMount - Parent Component"
          );
          return () => {
            console.log(
              "componentWillUnmount / cleanup after each re-reander - Parent Component"
            );
          };
        });

        console.log("render() - Parent Component");
        return (
          <div>
            <p>继承者们的故事</p>
            <p>Parent</p>
            <p>
              account balance: <mark>{balance}</mark>
            </p>

            <div>
              <button
                onClick={() => {
                  setShowChild(!showChild);
                }}
              >
                生小宝宝 / 消失掉小宝宝
              </button>
            </div>

            <div>
              <button
                onClick={() => {
                  setBalance(balance + 100);
                }}
              >
                给小宝宝挣奶粉钱
              </button>
            </div>

            {/* ternary operator, JSX */}
            {showChild ? (
              <Child balance={balance} msg="好好学习，天天向上" />
            ) : null}
          </div>
        );
      };

      const Child = (props) => {
        const [balance, setBalance] = React.useState(0);

        React.useEffect(() => {
          console.log(
            "componentDidUpdate / componentDidMount - Child Component"
          );

          return () => {
            console.log(
              "componentWillUnmount / cleanup after each re-reander - Child Component"
            );
          };
        });

        console.log("render() - Child Component");
        return (
          <div>
            <p>Child</p>
            <p>Parrent's account balance: {props.balance}</p>
            <p>Parent's msg: {props.msg}</p>

            <p>我的小金库嘿嘿 {balance}</p>

            <div>
              <button
                onClick={() => {
                  setBalance(balance + 100);
                }}
              >
                我要存钱
              </button>
            </div>
          </div>
        );
      };

      ReactDOM.render(<Parent />, document.getElementById("root"));
    </script>
  </body>
</html>
